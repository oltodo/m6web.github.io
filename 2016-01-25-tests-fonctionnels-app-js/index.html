<!DOCTYPE html>
 <html lang="en"><head><meta charset="utf-8"/><meta http-equiv="X-UA-Compatible" content="IE=edge"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><link rel="shortcut icon" href="/static/favicon.7c0adb24.ico"/><link rel="icon" type="image/png" sizes="32x32" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QA/wD/AP+gvaeTAAAAB3RJTUUH4QcUCzQMwl4uYgAABNZJREFUWMPtlktsVVUYhb917umLttgCQsu7j4CYOJAwVxNHJsaJOOBVpRQoIBYVEaEq4CNITAwaKKj4GOBETdSYOGKgA6JxYogiMSaCQi8PEwFLy23PWQ7Oue295d4Q0YQJf7JzTu65e/1r/2vtf2+4FTc5lH/ZteQsQCUQAEO9h6f9b0nWrzlHRIxgApADRvYfaII0GQBOxkLDc7Go3bH07P+S/In154kcIzPVZodhrgu+FxAwhnbjZwzbYlH9wrL/TiI3HCFoNN5tvNZ4hhmjEADsXHY2+Ulus6gyftJ4SyyqepffOInu1VkEE4FXgBWIupIVsCFUIEObgYQEW4x7YlGx7QZIrEuS1xp2GndZBCl2u4HV3dkCAsAIrjW0WKkfRI2h13hdFBBuXZH9V8lhbL5FJsXE0B5nFMRFFUg+NALTUzPmR61hJ3hVFCizpeP6JNKVVxmeBfcAFRRjzsGuzfsgrYCx3GwxGRjdnCmxiYYu2Y3XS75hTRbbGJaSmLkqX9HRDS+mGybnfRAUzJ9jqCuQgAIyRz78oOnCWNcoHTYgYThuOFeIVfCcZNGcxw9f7DhPFEWQGDBTYsJF4LPlHVl2v99ET2eW0AEjiucZ7rOoNXxn8a3McBxAjvhoiPYbXi1BotYwFzgKEERxzJaaaYk7VaRVfvxkcQzBps5sYljF9xs+N/QZXjd8YdgUiTAwZAgw+hT4nWvxAkM7wGOPZ5OtsXvoXA3QUkJ/EMcYGr4IwsnnBqAXmM/YqhoMm4FFo3qLUxbHXRqzLaoIFBuC1IINhpml9DeccXUFyozaZZbhzvyKChwwxfjuxNAwQRVDhv4ymC1E8QTjtDnANMOUEvpjUWEgcpwv4aBhqPh/xiI2upwnNsiILMIymDMMDQYCCyxmW9SX0B9Da5whYwwCiZMWX45LjuEHxNeJVM43ttllMCcDzQmBNAlQQeltswgzy0B0Wz0jMAzsQOwDTlpkga9A67FPjWLgBcCC8fqnz7p00QQRMTC2AyjWKt+7HwlGYsK/LvPWO03Eot/QY7gXdA9oseyjygTkApAUAh3WmKzjMMP8uRNmlKk2bi0qUTGZAYuVwxXB95gjG1dl2ft2EySV+K3Qhp3rslyNh6kiXGx4MPVLTQlMLNrDgRyBcaNhZlHpi8c3hj6L1+KAB6JAmQ1d154Jnd39yFRWKVwBbEbsMvxcBhNDS66usiY0NANTy2iFxR9IbxqHhoPYn0Tio7WrsycsBixkXG9zl+VHSbrjVksfGz9cBhPDDGBSSHIETyyjFcBp2xEBe5NyejvQAfwKnEs7W7Oh1RABT1k63FZZ719yl/pLYabP24HpocU8Q/X4Eo1WBE4DRCIns8dSjfHTFguLGpH4G9iO9F5gfGL4EhKnS2GmZCYiWgPDAoOuKVMyclbSzfYdbCISQ8DLFvsMUcGcQcNLSH3Y0aF9TaPky3mL5M4wPwDuKLP/sRgERu9jfQmJAdDzFocMtsgBe5DewAwf2t+cT47FGYuRMtgYFoQWUw1X0rOmUCsZsogLhU3/QN80urqzl4S2giuB80i7ZV99N02eNx7QD1xA1JcwY2AxKzQsMWhcefIxaDijgouIJFb2XERXr/wJbARGsK8UJi+IHw0PmeQ8KQ4DXOVW3Oz4BzcU6sPC/M50AAAAJXRFWHRkYXRlOmNyZWF0ZQAyMDE3LTA3LTIwVDExOjUyOjEyKzAyOjAwRaXnswAAACV0RVh0ZGF0ZTptb2RpZnkAMjAxNy0wNy0yMFQxMTo1MjoxMiswMjowMDT4Xw8AAABXelRYdFJhdyBwcm9maWxlIHR5cGUgaXB0YwAAeJzj8gwIcVYoKMpPy8xJ5VIAAyMLLmMLEyMTS5MUAxMgRIA0w2QDI7NUIMvY1MjEzMQcxAfLgEigSi4A6hcRdPJCNZUAAAAASUVORK5CYII="/><link rel="icon" type="image/png" sizes="16x16" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAACSVBMVEUAAACCWuloZuiBWul/W+lpZuhnZ+eAW+h7XehmZ+d+W+h4X+hqZuhkaOd1XuZ3X+hjaOd0YOhyYehlZ+dxYuhsZehjaedrZehcbOdsZOhabeeCWumCWulpZuhoZuiBWumAW+l+XOlpZuhoZudnZ+eAW+h/W+h9XOh6XuhqZuhoZudnZ+dmZ+d/W+h7Xeh5Xuh1YOhqZehpZudnZudkaOd9XOh4X+h3X+hwY+hpZuhoZudiaed8Xeh3X+hwY+hvY+htZOhrZehqZuhmZ+dgaudebOd8Xeh7Xeh2X+h1YOhvY+hqZedkaOdfa+ddbOd6Xuh5Xuh1YOh0YehuY+hsZOhpZudjaedda+dcbOd5Xuh4X+hyYuhuZOhtZOhrZehpZudoZuhhaudhaedbbOdabed4X+hyYehwYuhuZOhrZehjaediaedgaudabedYbud2X+hwYuhvY+hsZehqZehnZ+dlaOdjaediaedea+ddbOdXb+d1YOhvY+huZOhpZuhoZudmZ+dkaOdjaedtZehcbOdbbOdVb+d0YehyYuhvY+htZOhsZOhnZ+hkaOdjaediaudbbedabedXbudVb+dTcOdzYehxYuhvY+htZOhsZehjaedjaedabedZbudXb+dUcOdSceZ9XOhlaOd8Xeh6XuhmZ+dkaOd6Xeh4X+hiaed5XuhuY+hsZehjaedhaud3X+hqZedhaedfaud2YOhzYehgaudda+d2X+h0YOhea+dcbOd1YOhyYehabedYbudxYuhZbedXb+f///+g1V18AAAAoXRSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEBQYDL3UJDXolUfR9BgmK8kNz9nUECIP5ZJfEDgIs44i5gRuQnSoCnKoEGtX7UHiaYMkSNOr8VWr8imThKFb3mgMOZ3MYBqjyRn3+uFUHCV2//Gum+lZrom1vpGFj/pTN8jgFifv4fAJF+L3a7O3UIwuMggct2+zszSsrLCYFCAcHJywrKVc5MPMAAAABYktHRML9b77UAAAAB3RJTUUH4QcUCzQMwl4uYgAAAPNJREFUGNNjYEAHjNIyjDA2k6wcEwOzvIIiC4TPqqSswsbArqqmrsEB5mtqaetwMnDpLtTTN+BmYOAxNDJeZMLLwGe6eImZOb+FBaul1dJl1gIMijbLV9gK2tk7ODo5L1vp4srg5r7Kw1PIa/Uab2Gftet8/Rj8A9YHBokEh2wI5Q3buCk8giEyavOW6JjYuPiExKSt25JTGFK370hLz8gUFcvKztm5KzePIX/3noLCouKS0rLyisq9+6oYqrfsr6mtq29obGpuaT1wsI2hvaOzq1u8p7evX2LCxEmTpzBMnTZ9xkxJsVmzxaTmzJ03fwGG7wEGTEsbeOMldgAAACV0RVh0ZGF0ZTpjcmVhdGUAMjAxNy0wNy0yMFQxMTo1MjoxMiswMjowMEWl57MAAAAldEVYdGRhdGU6bW9kaWZ5ADIwMTctMDctMjBUMTE6NTI6MTIrMDI6MDA0+F8PAAAAV3pUWHRSYXcgcHJvZmlsZSB0eXBlIGlwdGMAAHic4/IMCHFWKCjKT8vMSeVSAAMjCy5jCxMjE0uTFAMTIESANMNkAyOzVCDL2NTIxMzEHMQHy4BIoEouAOoXEXTyQjWVAAAAAElFTkSuQmCC"/><link href="https://fonts.googleapis.com/css?family=Roboto:400,700,900" rel="stylesheet"/><style></style><link rel="preload" href="/page-component---src-templates-blog-post-js-fbe51bb1ddf0ca8888ab.js" as="script"/><link rel="preload" href="/path---2016-01-25-tests-fonctionnels-app-js-2fdee6eb8713b53ae3d1.js" as="script"/><link rel="preload" href="/layout-component---index-c2e4c81486bee5b8891a.js" as="script"/><link rel="preload" href="/app-8206d81d918471c32ad7.js" as="script"/><link rel="preload" href="/commons-ad833e5a7e6945aa4a2d.js" as="script"/><script id="webpack-manifest">
            //<![CDATA[
            window.webpackManifest = {"15178676390636814000":"app-8206d81d918471c32ad7.js","1678234744854196000":"page-component---src-templates-home-js-3eed630374749f34e7c7.js","5567064509904683000":"page-component---src-templates-blog-post-js-fbe51bb1ddf0ca8888ab.js","8144742166368117000":"page-component---src-pages-404-js-1a3edab7b4c771e0b426.js","9347362237655822000":"path---index-0e69b574074ee4649d33.js","10307866041846470000":"path---2-d30fcf3af6d12fcff482.js","11991844440425177000":"path---3-c93df0bdb37cfe47afab.js","1603089222999017000":"path---4-baa88eea35114cb9a335.js","5362417080020119000":"path---5-a6092eb5a62d2fb1efa6.js","10555523231800414000":"path---6-b0f1f2a66df0161191d7.js","8859960338889796000":"path---7-98e1f2a830fc9ab0c598.js","8178086400888292000":"path---8-874c8ac7b6311b56ceb7.js","13989712874205137000":"path---9-477eb2d7f7e9483c60cc.js","91288599462261940":"path---10-00afb608f7edfb06ee7e.js","11495171164421010000":"path---11-e19ab68546bd15919961.js","7803672803511238000":"path---writing-post-guidelines-e22543165d666e32f5b9.js","17162649412951050000":"path---2017-06-01-migration-elasticsearch-61339f79b33972c117d3.js","6942278985948512000":"path---2017-05-17-spa-mode-isomorphism-js-57b972bb0426a1f80e21.js","9354334619318092000":"path---2017-04-03-sf-live-2017-23bd6baf271a65aefad5.js","9760925777106893000":"path---2017-03-30-prettier-308dad58a202b6e89983.js","14933806871023946000":"path---2017-02-20-retour-de-paris-video-tech-79db548f2d674d8bf6ed.js","6780503779859023000":"path---2017-01-31-get-brownfield-react-native-app-built-on-demand-0040b6f4c170042f8c10.js","7870469418328626000":"path---2016-11-24-une-donnee-presque-parfaite-71db1009ea58b8e2fd97.js","7020235368703346000":"path---2016-11-03-blendwebmix-6-play-conference-d5f58e356fbb705ca511.js","5287232330990470000":"path---2016-10-12-velocity-nyc-2016-e485c1402ebd6bb5b14e.js","853902435505480200":"path---2016-07-20-sf-2-security-checker-276fb5c46fba86ca0bde.js","5357077970108816000":"path---2016-07-04-rex-cassandra-f1e561149166be7c539e.js","10159286331934444000":"path---2016-07-04-migrate-smoothly-flux-isomorphic-app-to-redux-e4e8292ecfcecde17421.js","14004021262823037000":"path---2016-06-23-video-phptour-worker-php-af2df71535ceb9b20499.js","17562425498955082000":"path---2016-06-20-preview-android-ios-react-native-on-github-pull-request-0d769ee7c61946dc4897.js","12353118943198970000":"path---2016-05-25-m-6-web-retourdxp-cassandra-df56e802557c1ad2cb9f.js","4601375937037177000":"path---2016-05-19-6-tech-sfpot-lille-8a46b474b68688ce170c.js","5288667845965160000":"path---2016-05-09-6-tech-phptour-clermont-310b23487b364d2fc5c4.js","2052343472057445000":"path---2016-03-29-retro-agile-garde-a-vous-ac6f5ac7eda2efa6e942.js","11739317455098083000":"path---2016-01-26-m-6-web-lyon-recherche-developpeur-player-video-web-h-f-en-cdi-ddc6c176c243dca67449.js","6265468986860932000":"path---2016-01-25-tests-fonctionnels-app-js-2fdee6eb8713b53ae3d1.js","3233593281510953000":"path---2015-11-30-beta-nouveau-6-play-backend-9447c8d2d16b6cfde25d.js","10664539270748043000":"path---2015-11-06-m-6-web-dev-facts-9-be9c309ee44cc3f3177e.js","15409095257929464000":"path---2015-10-21-beta-nouveau-6-play-react-isomorphic-c1cfa6220171175e87fe.js","2028436677628524300":"path---2015-09-09-hooks-git-903fd00d09ff468ca4ad.js","14452569582683170000":"path---2015-07-10-cr-react-europe-2015-day-two-a3b160f7d2f1d1b82d08.js","8738486388747641000":"path---2015-07-06-cr-react-europe-2015-day-one-78f80b8b544d178bb319.js","3952169373383821300":"path---m-6-web-au-phptour-luxembourg-d4a31433a94542090673.js","14267055682789267000":"path---2015-05-07-m-6-web-dev-facts-8-dd669a9211ca6a258972.js","3229580628353207000":"path---2015-04-17-mixit-2015-jour-2-ad8cc2e15a6f87b367b1.js","7403774433838001000":"path---2015-04-16-mixit-2015-jour-1-e301f38733d29a7e574b.js","15847801484041351000":"path---2015-04-01-immutablejs-relay-graphql-react-native-019e6aaf21df1e44e25b.js","16776760198476497000":"path---comment-a-t-on-bouchonne-les-developpeurs-backend-df2fa71883ed7dc35716.js","17286940000189432000":"path---how-did-we-mock-the-backend-developers-d3cc34671766b7d50252.js","10749462381486705000":"path---lft-cassandra-f1e13dc5ad99fa7055a4.js","7332436263870423000":"path---2015-02-10-cr-react-conf-2015-day-two-80ec031d927f4b3e955b.js","16087329104712847000":"path---2015-02-04-cr-react-conf-2015-day-one-5035cc14c373f74045cc.js","15701269989589799000":"path---2014-12-04-isomorphic-single-page-app-parfaite-react-flux-3be1892bf37d3adccbd3.js","16451773729229097000":"path---velocity-europe-2014-day-3-2880c4cb3f3b3f89b178.js","6056515083553241000":"path---velocity-europe-2014-day-2-accc8122a3be0c9c83b3.js","12743668555603100000":"path---velocity-europe-2014-day-1-e7f2c1d7a15d93539da6.js","9503839093359790000":"path---symfony-expression-language-b1ee7cccc749bc4a0d63.js","8546450019714081000":"path---2014-11-13-m-6-web-dev-facts-7-23e9a5f523e5bfc6bfa0.js","7827921171204730000":"path---retour-sur-le-forumphp-2014-29f174465d3c55852380.js","11772264456669016000":"path---github-team-reviewer-pull-requests-501d57d51a8499d9cc51.js","10114230876444041000":"path---surcharger-un-provider-angular-333bd1995a54eaffd923.js","13509551332287162000":"path---2014-09-30-ameliorer-la-webperf-de-son-application-js-avec-gruntjs-4962946482eff063aac3.js","17404885850284728000":"path---tests-e-2-e-application-angularjs-protractor-b0dbbd90dabf67ca5197.js","1094807860966670500":"path---2014-08-05-verifier-la-coherence-du-code-d-un-projet-symfony-2-avec-coke-cedf4497c897bb2fb194.js","17754514445434400000":"path---2014-06-25-m-6-web-etait-au-phptour-lyon-2014-4ae637fde5d427d8e4dc.js","5177862320755282000":"path---2014-05-15-m-6-web-sera-present-au-phptour-lyon-2014-f58fe9f8acf66e4b3bb4.js","2301011844095907000":"path---2014-04-23-babitch-the-story-behind-our-table-soccer-web-application-02b6fcfe4658260cfd72.js","15593514085760563000":"path---2014-04-11-m-6-web-lyon-recherche-un-lead-developpeur-architecte-web-h-f-en-cdi-515072b02a3e06d70aec.js","7332428723097102000":"path---2014-04-10-sf-live-2014-symfony-a-la-tele-3faf43a3969b5ea9157a.js","7733466120289764000":"path---2014-03-04-utilisation-du-statsdbundle-avec-la-console-0c546b3503199875b9f0.js","5729145014323964000":"path---2014-02-18-refonte-de-notre-systeme-de-vote-84989e02db6088f15cf3.js","2552669174671822000":"path---2014-01-28-how-we-use-statsd-24b733be76ac9deedb2a.js","12589857351633986000":"path---2014-01-20-m-6-web-dev-facts-6-01729346ebcf23241fc9.js","11910221005920872000":"path---2014-01-18-vagrant-julien-bianchi-e9dd5b5dc69ffc3e5c00.js","13689007030920464000":"path---2014-01-08-api-a-consommer-avec-moderation-f806e0bab82ab33b916b.js","10935238532326365000":"path---vis-ma-vie-sysadmin-forumphp-66ba8d72c068ddbab5fd.js","5485711701974236000":"path---redismock-qui-a-bouchonne-mon-redis-54efa27efd9c49b7b727.js","13928220128757432000":"path---composer-installation-without-github-8d9dfc452d4b6f3d538d.js","16201139586168523000":"path---jenkinslight-mettez-en-lumiere-vos-jobs-jenkins-21e5eff77cea3a9e0571.js","12434156185772188000":"path---velocity-europe-2013-day-3-1704d69baa136a0e6836.js","4865699463020770000":"path---velocity-europe-2013-day-2-959282e1f4dcb8c21e9b.js","9234615935232280000":"path---velocity-europe-2013-day-1-5c3bf0b5af53409a774c.js","8046552783351314000":"path---tester-fonctionnellement-une-api-rest-symfony-doctrine-atoum-6c52378df4195317f394.js","14334248029160552000":"path---distribuez-votre-video-partout-avec-3-euros-en-poche-et-devenez-millionaire-ou-presque-470e5cc57462c8dcff76.js","10570010181968095000":"path---le-nosql-focus-sur-mongodb-par-cedric-derue-altran-d83eb0929e36ab6c58e8.js","11796148760232034000":"path---vigo-le-fleau-des-carpates-la-tristesse-de-moldavie-0bfb3f1047c40fe48f51.js","11120030273723666000":"path---introduction-qualite-logicielle-avec-node-js-182855aa77c58ac15a47.js","8604288729304566000":"path---introduction-a-drupal-par-claire-roubey-clever-age-a0689728367b829704b9.js","15903444466819471000":"path---lache-moi-la-branch-08157f71d66620fafcc2.js","10071173443366248000":"path---m-6-web-dev-facts-5-1a9462c168fc1ae43744.js","13209462253208130000":"path---benchmarking-websockets-avec-nodejs-eed5ea314c6215f40d89.js","15884576102335875000":"path---performances-web-disaster-case-applications-mobile-native-38e8213804d007b57775.js","10823624351499060000":"path---coke-pour-bien-sniffer-son-code-0000c99936c591ee6d18.js","17544186680005968000":"path---encodage-packaging-drm-tout-sur-la-video-34743dc6a157bec678dc.js","16915654042232957000":"path---m-6-web-dev-facts-4-0aebe81b8a00f7b446c4.js","14959254526500108000":"path---firewall-applicatif-php-et-bundle-symfony-7760d249d1f597eb1918.js","14874237888928637000":"path---m-6-web-dev-facts-3-01e70a08d507adf67433.js","14946238800479066000":"path---redis-on-fire-07b6700a886dd3d26855.js","14839077316297011000":"path---cr-conference-agora-cms-du-15-mai-2013-806e80a435ad4b4dadb5.js","5703749313299627000":"path---la-poo-canada-dry-cfbc25b1ff75b7afb9fe.js","6586192456415092000":"path---cr-real-time-conference-europe-2013-day-2-ad5554c176aaff9eaa3a.js","11454168689866953000":"path---cr-real-time-conference-europe-2013-day-1-6c195940dd7a2ebe66ff.js","17785082780749552000":"path---m-6-web-dev-facts-2-c7ff953d5036e4340bb5.js","14821051442942687000":"path---m-6-web-dev-facts-1-28a594ac8974b6467881.js","11892591640059814000":"path---m-6-web-lyon-recherche-un-lead-developpeur-architecte-web-h-f-en-cdi-10caeb1add770e2139eb.js","13740870568820118000":"path---organiser-des-conferences-technique-en-interne-95b4f3c3e79b1a49ce94.js","8375679014523352000":"path---m-6-web-au-banquet-de-la-cuisine-du-web-b101036a14ed6c8547dc.js","16568272801780832000":"path---cr-velocity-conference-europe-2012-day-3-d7f1f6faf69b82f4a1bf.js","1078884578585256000":"path---cr-velocity-conference-europe-2012-day-2-0c0647eaae962357ab0a.js","18227064928437770000":"path---cr-velocity-conference-europe-2012-day-1-a61c16de010075f9cb9e.js","2219810676468073500":"path---tentative-d-explication-des-fast-forward-sous-git-530810482196b4b8a89b.js","18164559839002060000":"path---integration-continue-avec-jenkins-et-atoum-af28bfe626eaa1601e6a.js","16767439749070496000":"path---retrouvez-l-intervention-du-cto-de-m-6-web-martin-boronski-a-la-table-ronde-du-forum-php-2012-ee18bd7da8c3889ea6eb.js","954585506351283100":"path---cr-velocity-conference-2012-day-2-devops-webperf-5d00a7cc7dfeb45da1c8.js","6911463883558992000":"path---cr-velocity-conference-2012-day-3-devops-webperf-2cca445c736b2f3b9e8c.js","1278340647346106000":"path---cr-velocity-conference-day-1-dev-webperf-be7936e6bde6e8fda40f.js","924823853440382100":"path---monitoring-applicatif-pourquoi-et-comment-de705ba1a1d74bfba9b5.js","6387841063590224000":"path---m-6-web-au-web-event-lyon-4-1731a7cbbb23f3371f31.js","5225245647109938000":"path---m-6-web-tait-pr-sent-au-forum-php-2012-88abf8e4faefdcf6b5df.js","10860509107199780000":"path---m-6-web-au-forum-php-2012-et-au-webevent-4-de1c730e829885a4fe85.js","7917467032229999000":"path---performances-php-chez-m-6-web-de8fdb90e7117dda55c4.js","11151541960945994000":"path---lancement-du-blog-technique-dm-6-web-7ca8fb16a1fa4330deae.js","16647598582412890000":"path---404-a0e39f21c11f6a62c5ab.js","11711201792954765000":"path---404-html-a0e39f21c11f6a62c5ab.js","17241999800008180000":"layout-component---index-c2e4c81486bee5b8891a.js"}
            //]]>
            </script><style type="text/css" data-styled-components="dkIpzS rBGBU hYMHAj jtLPJk dAKnmY bEJVOz hMHxoy jfmLrS gknBRj ezhwLl gyAwmV eEqPQk dkFleX cGEAUG kndpkt ggLcPy gAAzOx bTjqEk kDNhcm cBZpCn gbenQb bmILUK uVVjM fKsidO" data-styled-components-is-local="true">/* sc-component-id: sc-bdVaJa */

.fKsidO{-webkit-transition:color .2s;transition:color .2s;cursor:pointer;color:inherit;border-bottom:dashed 1px;}.fKsidO:hover{color:#3763df;}
/* sc-component-id: sc-gZMcBi */

.dAKnmY{max-width:1094px;margin:0 auto;padding:0 35px;}
/* sc-component-id: sc-VigVT */

.eEqPQk{color:#434343;font-size:19px;line-height:1.8;}
/* sc-component-id: sc-jzJRlG */

.dkFleX{max-width:750px;margin:0 calc(8% + 35px) 35px auto !important;}
/* sc-component-id: sc-kAzzGY */

.cBZpCn{max-width:750px;margin:0 calc(8% + 35px) 35px auto !important;font-size:16px;}
/* sc-component-id: sc-kpOJdX */

.cGEAUG{max-width:750px;margin:0 calc(8% + 35px) 35px auto !important;font-weight:700;font-size:1.8em;line-height:1.2;margin:55px 0 35px 0;}
/* sc-component-id: sc-ckVGcZ */

.kDNhcm{max-width:750px;margin:0 calc(8% + 35px) 35px auto !important;font-weight:400;font-size:1.5em;line-height:1.2;font-style:italic;margin:45px 0 25px 0;}
/* sc-component-id: sc-hSdWYo */

.kndpkt{-webkit-transition:color .2s;transition:color .2s;cursor:pointer;color:inherit;border-bottom:dashed 1px;word-wrap:break-word;}.kndpkt:hover{color:#3763df;}
/* sc-component-id: sc-eHgmQL */

.bmILUK{font-style:italic;}
/* sc-component-id: sc-cvbbAY */

.bTjqEk{font-weight:bold;}
/* sc-component-id: sc-jWBwVP */

.gbenQb{font-family:monospace;background:#eee;padding:2px 5px;border-radius:2px;}
/* sc-component-id: sc-cMljjf */

.ggLcPy{max-width:750px;margin:0 calc(8% + 35px) 35px auto !important;}.ggLcPy ul{margin:0 !important;}
/* sc-component-id: sc-jAaTju */

.gAAzOx{list-style:initial;margin-left:35px;}
/* sc-component-id: sc-fMiknA */

.bEJVOz{position:relative;background:#a3bbf3 no-repeat center;background-color:#4776E6;background-image:-webkit-linear-gradient( 225deg, #4776E6, #8E54E9);background-image:-moz-linear-gradient( 225deg, #4776E6,, #8E54E9);background-image:-o-linear-gradient( 225deg, #4776E6,, #8E54E9);background-image:linear-gradient( 225deg, #4776E6, #8E54E9);background-size:cover;margin-bottom:50px;background-image:url(/static/3a5d8f2a6cc296c35e302243d5ce453e-338bd.jpg);}.bEJVOz:before{content:"";display:block;padding-bottom:60%;}
/* sc-component-id: sc-dVhcbM */

.hMHxoy{position:absolute;font-weight:700;font-size:70px;top:0;left:0;bottom:50px;color:white;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-flex-direction:column;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:end;-webkit-justify-content:flex-end;-ms-flex-pack:end;justify-content:flex-end;}
/* sc-component-id: sc-eqIVtm */

.jfmLrS{line-height:110px;margin:8px 0 0;width:auto;line-height:1.2em;}.jfmLrS > span{background:#8e54e9;padding:0 2px;display:inline-block;}

.gknBRj{line-height:110px;margin:8px 0 0;width:auto;line-height:1.2em;}.gknBRj > span{background:#7c5feb;padding:0 2px;display:inline-block;}

.ezhwLl{line-height:110px;margin:8px 0 0;width:auto;line-height:1.2em;}.ezhwLl > span{background:#6968eb;padding:0 2px;display:inline-block;}
/* sc-component-id: sc-caSCKo */

/* sc-component-id: sc-gisBJw */

.dkIpzS{height:4px;background-color:#4776E6;background-image:-webkit-linear-gradient( 225deg, #4776E6, #8E54E9);background-image:-moz-linear-gradient( 225deg, #4776E6,, #8E54E9);background-image:-o-linear-gradient( 225deg, #4776E6,, #8E54E9);background-image:linear-gradient( 225deg, #4776E6, #8E54E9);}
/* sc-component-id: sc-kjoXOD */

.rBGBU{height:140px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;max-width:1280px;margin:0 0 50px;padding:0 50px;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;}
/* sc-component-id: sc-cHGsZl */

.hYMHAj{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:35px;}
/* sc-component-id: sc-TOsTZ */

.jtLPJk{font-weight:900;font-size:30px;color:#d6d6d6;margin:0 4px;cursor:pointer;position:relative;}.jtLPJk:hover{color:#ccc;}.jtLPJk:hover:after{width:100%;margin-left:0;}.jtLPJk:after{content:"";position:absolute;left:0;bottom:-5px;height:2px;background-color:#4776E6;background-image:-webkit-linear-gradient( 225deg, #4776E6, #8E54E9);background-image:-moz-linear-gradient( 225deg, #4776E6,, #8E54E9);background-image:-o-linear-gradient( 225deg, #4776E6,, #8E54E9);background-image:linear-gradient( 225deg, #4776E6, #8E54E9);width:0;margin-left:50%;-webkit-transition:width 0.2s,margin 0.2s;transition:width 0.2s,margin 0.2s;-webkit-transform-origin:center;-ms-transform-origin:center;transform-origin:center;}
/* sc-component-id: sc-kgAjT */

.uVVjM{margin-top:100px;border-top:#bbb solid 1px;padding:35px 0;color:#bbb;}
</style><title data-react-helmet="true">On a testé fonctionnellement notre app JS</title><meta data-react-helmet="true" name="description" content="Sample"/><meta data-react-helmet="true" name="keywords" content="sample, something"/><script>
  !function(e,t,r){function n(){for(;d[0]&&"loaded"==d[0][f];)c=d.shift(),c[o]=!i.parentNode.insertBefore(c,i)}for(var s,a,c,d=[],i=e.scripts[0],o="onreadystatechange",f="readyState";s=r.shift();)a=e.createElement(t),"async"in i?(a.async=!1,e.head.appendChild(a)):i[f]?(d.push(a),a[o]=n):e.write("<"+t+' src="'+s+'" defer></'+t+">"),a.src=s}(document,"script",[
  "/commons-ad833e5a7e6945aa4a2d.js","/app-8206d81d918471c32ad7.js","/layout-component---index-c2e4c81486bee5b8891a.js","/path---2016-01-25-tests-fonctionnels-app-js-2fdee6eb8713b53ae3d1.js","/page-component---src-templates-blog-post-js-fbe51bb1ddf0ca8888ab.js"
])
  </script></head><body><div id="___gatsby"><div style="margin-bottom:50px;" data-reactroot="" data-reactid="1" data-react-checksum="-1046549819"><!-- react-empty: 2 --><div data-reactid="3"><div class="sc-gisBJw dkIpzS" data-reactid="4"></div><div class="sc-kjoXOD rBGBU" data-reactid="5"><a href="/" data-reactid="6"><svg width="195" height="70" viewBox="0 0 195 70" version="1.1" xmlns="http://www.w3.org/2000/svg" data-reactid="7"><defs data-reactid="8"><linearGradient id="gradient" x1="0" y1="50%" x2="100%" y2="50%" data-reactid="9"><stop stop-color="#b087f0" offset="0%" data-reactid="10"></stop><stop stop-color="#7b43e3" offset="100%" data-reactid="11"></stop></linearGradient></defs><g data-reactid="12"><g fill="url(#gradient)" data-reactid="13"><path d="M85.8875934,0 L96.305908,0 L99.8023075,18.5330433 L104.921276,0 L114.605463,0 L119.735583,18.508649 L123.23965,0 L132.905367,0 L125.606942,33.106544 L115.576704,33.106544 L109.76912,12.2626639 L103.983838,33.106544 L92.2830622,33.106544 L86.9300674,0 L85.8875934,2.07983834e-17 Z M93.0742848,38 L112.039476,38 L112.039476,43.2252503 L105.370811,43.2252503 L105.370811,59.1611722 L98.832009,59.1611722 L98.832009,43.2252503 L93.9191551,43.2252503 L93.0742848,38 Z M113.086826,38 L130.610504,38 L130.610504,42.5180216 L119.64033,42.5180216 L119.64033,45.8813115 L129.816626,45.8813115 L129.816626,50.1972996 L119.64033,50.1972996 L119.64033,54.3689463 L130.928145,54.3689463 L130.928145,59.1611722 L113.086826,59.1611722 L113.086826,38 Z M145.350596,50.4369778 L150.89215,52.1120516 C150.519937,53.6661726 149.933661,54.9643548 149.133323,56.0063755 C148.333208,57.0488417 147.339747,57.8349235 146.153384,58.3655121 C144.9668,58.8958779 143.457006,59.1611722 141.62378,59.1611722 C139.399629,59.1611722 137.582664,58.8377403 136.172885,58.1922132 C134.763105,57.5453496 133.546449,56.409106 132.522694,54.7817005 C131.498939,53.154295 130.987506,51.0709219 130.987506,48.5315813 C130.987506,45.1466847 131.887859,42.5458653 133.68834,40.72645 C135.489045,38.9097077 138.036404,38 141.330642,38 C143.908295,38 145.934645,38.5210103 147.409467,39.5632537 C148.884512,40.6054972 149.980215,42.2061728 150.696799,44.3650578 L145.113591,45.60733 C144.918017,44.9838551 144.713311,44.5278875 144.499249,44.2394273 C144.145523,43.7553933 143.712722,43.3831794 143.201067,43.1227857 C142.689412,42.8621691 142.116946,42.7318608 141.484339,42.7318608 C140.051171,42.7318608 138.953017,43.309004 138.190101,44.4603945 C137.612958,45.3166423 137.324498,46.6589289 137.324498,48.4897044 C137.324498,50.7579593 137.668868,52.3120804 138.357386,53.1531813 C139.045904,53.9940594 140.013971,54.4152781 141.260921,54.4152781 C142.470449,54.4152781 143.384835,54.0755856 144.003632,53.3962006 C144.622429,52.7168156 145.071492,51.7304822 145.350596,50.4369778 Z M151.911211,38 L158.450013,38 L158.450013,45.4050738 L165.595362,45.4050738 L165.595362,38 L172.163121,38 L172.163121,59.1611722 L165.595362,59.1611722 L165.595362,50.6013666 L158.450013,50.6013666 L158.450013,59.1611722 L151.911211,59.1611722 L151.911211,38 Z M134.703032,0 L162.118735,0 L162.118735,7.06842139 L144.955954,7.06842139 L144.955954,12.3302709 L160.876717,12.3302709 L160.876717,19.082612 L144.955954,19.082612 L144.955954,25.6091315 L162.615682,25.6091315 L162.615682,33.106544 L134.703032,33.106544 L134.703032,0 Z M164.245612,0.000139395975 L183.395831,0.000139395975 C186.587302,0.000139395975 189.037535,0.790514573 190.746529,2.37126493 C192.455175,3.95201528 193.309673,5.90913476 193.309673,8.24262338 C193.309673,10.2000914 192.699815,11.8787674 191.480449,13.2786515 C190.667422,14.212256 189.478026,14.9500092 187.912261,15.491911 C190.291053,16.0641315 192.041169,17.0465247 193.16261,18.4390904 C194.284399,19.8316562 194.845119,21.5817727 194.845119,23.6894398 C194.845119,25.4057528 194.446447,26.9488662 193.648405,28.3187801 C192.850363,29.6890426 191.758893,30.7728463 190.373645,31.5708882 C189.515663,32.0678349 188.221023,32.429219 186.489725,32.6550404 C184.185858,32.9557872 182.658078,33.1066834 181.90534,33.1066834 L164.245612,33.1066834 L164.245612,0.000139395975 Z M174.565793,25.9929583 L179.782687,25.9929583 C181.543607,25.9929583 182.785974,25.6807113 183.508742,25.0558689 C184.231161,24.4310264 184.592545,23.5915142 184.592545,22.5376806 C184.592545,21.5591208 184.234995,20.7725791 183.519893,20.1777067 C182.804792,19.5831829 181.551622,19.2855725 179.759687,19.2855725 L174.565793,19.2855725 L174.565793,25.9929583 Z M174.565793,12.9852229 L179.014616,12.9852229 C180.610699,12.9852229 181.72064,12.7102644 182.345482,12.1610442 C182.970325,11.6114756 183.28292,10.817267 183.28292,9.77841853 C183.28292,8.81484386 182.970325,8.06210559 182.345482,7.52020374 C181.72064,6.97830189 180.633003,6.70717672 179.082571,6.70717672 L174.565793,6.70717672 L174.565793,12.9852229 Z M29.03915,18.5262348 C26.3319,24.1748848 24.2522,30.0636348 24.3782,34.6566848 C24.3782,46.3893848 33.9675,55.9002848 45.7961,55.9002848 C57.6247,55.9002848 67.214,46.3893848 67.214,34.6566848 C67.214,28.9331348 64.932,23.7384348 61.22095,19.9188848 L80.27355,3.48258707e-05 L91.5922,70.0000348 L68.78095,70.0000348 L66.16925,48.4078348 L45.7961,70.0000348 L25.42295,48.4078348 L22.81125,70.0000348 L0,70.0000348 L11.31865,3.48258707e-05 L29.03915,18.5262348 Z M45.5682587,43.8405821 C40.3530846,43.8405821 36.1255721,39.6127214 36.1255721,34.3975473 C36.1255721,29.1823731 40.3530846,24.9548607 45.5682587,24.9548607 C50.7834328,24.9548607 55.0109453,29.1823731 55.0109453,34.3975473 C55.0109453,39.6127214 50.7834328,43.8405821 45.5682587,43.8405821 Z" data-reactid="14"></path></g></g></svg></a><div class="sc-cHGsZl hYMHAj" data-reactid="15"><a href="/" data-reactid="16"><div class="sc-TOsTZ jtLPJk" data-reactid="17">HOME</div></a><div class="sc-TOsTZ jtLPJk" data-reactid="18">ABOUT</div><div class="sc-TOsTZ jtLPJk" data-reactid="19">JOBS</div><div class="sc-TOsTZ jtLPJk" data-reactid="20">OSS</div></div></div></div><div class="sc-gZMcBi dAKnmY" data-reactid="21"><!-- react-empty: 22 --><div class="sc-fMiknA bEJVOz" src="/static/3a5d8f2a6cc296c35e302243d5ce453e-338bd.jpg" data-reactid="23"><h1 class="sc-dVhcbM hMHxoy" data-reactid="24"><span class="sc-eqIVtm jfmLrS" color="#8e54e9" data-reactid="25"><span data-reactid="26">On a testé</span></span><span class="sc-eqIVtm gknBRj" color="#7c5feb" data-reactid="27"><span data-reactid="28">fonctionnellement</span></span><span class="sc-eqIVtm ezhwLl" color="#6968eb" data-reactid="29"><span data-reactid="30">notre app JS</span></span></h1></div><div class="sc-caSCKo gyAwmV" data-reactid="31"><div class="sc-VigVT eEqPQk" data-reactid="32"><p class="sc-jzJRlG dkFleX" data-reactid="33"><!-- react-text: 34 -->L’utilité des tests fonctionnels pour les applications web n’est plus à démontrer (comment ça, vous ne testez pas encore vos apps ?). Malheureusement, tout ne peut pas être totalement testé fonctionnellement, ou de façon aisée : je pense par exemple au player chez nous, un composant stratégique mais pauvrement testé fonctionnellement de par sa nature un peu hybride (mélange de flash et de JS). Dans tous les cas, pour ce qui peut l’être, nous sommes partisans dans l’équipe Cytron d’user sans mesure (ou presque !) de cet outil de manière à être le plus zen possible au moment d’appuyer sur le bouton “deploy”.<!-- /react-text --></p><h2 class="sc-kpOJdX cGEAUG" data-reactid="35"><!-- react-text: 36 -->Quelle stack ?<!-- /react-text --></h2><p class="sc-jzJRlG dkFleX" data-reactid="37"><!-- react-text: 38 -->Notre application est codée en JS isomorphique (ou <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://medium.com/@mjackson/universal-javascript-4761051b7ae9#.2srtfrqku" data-reactid="39"><!-- react-text: 40 -->Universal JS<!-- /react-text --></a><!-- react-text: 41 -->) grâce à <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="/beta-nouveau-6play-react-isomorphic/" data-reactid="42"><!-- react-text: 43 -->React et Node.js<!-- /react-text --></a><!-- react-text: 44 -->.<!-- /react-text --></p><p class="sc-jzJRlG dkFleX" data-reactid="45"><!-- react-text: 46 -->Pour les tests fonctionnels, nous utilisons le trio <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://github.com/cucumber/cucumber-js" data-reactid="47"><!-- react-text: 48 -->Cucumber.js<!-- /react-text --></a><!-- react-text: 49 --> + <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://webdriver.io/" data-reactid="50"><!-- react-text: 51 -->WebdriverIO<!-- /react-text --></a><!-- react-text: 52 --> + <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://phantomjs.org/" data-reactid="53"><!-- react-text: 54 -->PhantomJS<!-- /react-text --></a><!-- react-text: 55 --> :<!-- /react-text --></p><ul class="sc-cMljjf ggLcPy" data-reactid="56"><li class="sc-jAaTju gAAzOx" data-reactid="57"><strong class="sc-cvbbAY bTjqEk" data-reactid="58"><!-- react-text: 59 -->Cucumber.js<!-- /react-text --></strong><!-- react-text: 60 --> est l’outil qui permet de dérouler la suite de tests écrits dans la syntaxe <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://github.com/cucumber/cucumber/wiki/Gherkin" data-reactid="61"><!-- react-text: 62 -->Gherkin<!-- /react-text --></a><!-- react-text: 63 -->,<!-- /react-text --></li><li class="sc-jAaTju gAAzOx" data-reactid="64"><strong class="sc-cvbbAY bTjqEk" data-reactid="65"><!-- react-text: 66 -->WebdriverIO<!-- /react-text --></strong><!-- react-text: 67 --> permet d’interfacer les tests traduits en JS avec un serveur Selenium (dialoguant grâce au protocole <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://code.google.com/p/selenium/wiki/JsonWireProtocol" data-reactid="68"><!-- react-text: 69 -->WebDriver Wire<!-- /react-text --></a><!-- react-text: 70 --> et permettant de contrôler un browser),<!-- /react-text --></li><li class="sc-jAaTju gAAzOx" data-reactid="71"><strong class="sc-cvbbAY bTjqEk" data-reactid="72"><!-- react-text: 73 -->PhantomJS<!-- /react-text --></strong><!-- react-text: 74 --> est le browser dans lequel les scénarios de tests seront exécutés, il embarque son propre serveur Webdriver, <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://github.com/detro/ghostdriver" data-reactid="75"><!-- react-text: 76 -->Ghostdriver<!-- /react-text --></a><!-- react-text: 77 -->.<!-- /react-text --></li></ul><p class="sc-jzJRlG dkFleX" data-reactid="78"><!-- react-text: 79 -->Toutes <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://tech.m6web.fr/lache-moi-la-branch/" data-reactid="80"><!-- react-text: 81 -->nos Pull Requests lancent les tests indépendamment via Jenkins<!-- /react-text --></a><!-- react-text: 82 --> dans un environnement “dockerisé”, donc complètement autonome et isolé. De façon à respecter ce principe jusqu’au bout et à ne pas dépendre de données versatiles, nos API sont aussi mockées grâce à <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://github.com/M6Web/superagent-mock" data-reactid="83"><!-- react-text: 84 -->superagent-mock<!-- /react-text --></a><!-- react-text: 85 -->.<!-- /react-text --></p><h2 class="sc-kpOJdX cGEAUG" data-reactid="86"><!-- react-text: 87 -->Setup<!-- /react-text --></h2><h3 class="sc-ckVGcZ kDNhcm" data-reactid="88"><!-- react-text: 89 -->Arborescence<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="90"><!-- react-text: 91 -->Dans notre projet, nous avons un dossier pour les tests fonctionnels organisés comme suit :<!-- /react-text --></p><pre class="language-bash sc-kAzzGY cBZpCn" data-reactid="92"><code class="language-bash" data-reactid="93">├─┐ tests
│ ├─┐ step_definitions
│ │ └── my_feature.steps.js
│ ├─┐ screenshots
│ │ └── my_scenario.png
│ ├─┐ support
│ │ ├── config.json
│ │ ├── constants.json
│ │ ├── hooks.js
│ │ └── world.js
│ └── my_feature.feature
</code></pre><h3 class="sc-ckVGcZ kDNhcm" data-reactid="94"><!-- react-text: 95 -->Features<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="96"><!-- react-text: 97 -->Une feature est un fichier testant une fonctionnalité de l’application et regroupant plusieurs scénarios de test. Il est écrit en langage naturel (Gherkin) de façon à être lisible par tous.<!-- /react-text --></p><pre class="language-bash sc-kAzzGY cBZpCn" data-reactid="98"><code class="language-bash" data-reactid="99"><span class="token comment" spellcheck="true"># tests/support/cookie.feature</span>
Feature: Scenarios about the cookie banner

  Scenario: See the cookie banner and close it
    Given My browser storage is empty
    When I visit the <span class="token string">"homepage"</span> page
    Then I should see the <span class="token string">"cookie banner"</span>

    When I click on <span class="token string">"Accept cookie"</span>
    Then I should not see a <span class="token string">"cookie banner"</span>

    When I visit the <span class="token string">"homepage"</span> page
    Then I should not see a <span class="token string">"cookie banner"</span>
</code></pre><h3 class="sc-ckVGcZ kDNhcm" data-reactid="100"><!-- react-text: 101 -->World<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="102"><!-- react-text: 103 -->Le fichier <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="104">world.js</code><!-- react-text: 105 --> est le point de départ pour Cucumber.js. C’est ici que nous initialisons WebdriverIO et que nous mettons un place un contexte qui sera disponible pour tous les tests.<!-- /react-text --></p><pre class="language-javascript sc-kAzzGY cBZpCn" data-reactid="106"><code class="language-javascript" data-reactid="107"><span class="token comment" spellcheck="true">// tests/support/world.js</span>
<span class="token keyword">var</span> Webdriver <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'webdriverio'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./config.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> assert <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'assert'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">var</span> browser <span class="token operator">=</span> Webdriver<span class="token punctuation">.</span><span class="token function">remote</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  logLevel<span class="token punctuation">:</span> config<span class="token punctuation">.</span>logLevel <span class="token operator">||</span> <span class="token string">'silent'</span><span class="token punctuation">,</span>
  host<span class="token punctuation">:</span> config<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>host<span class="token punctuation">,</span>
  port<span class="token punctuation">:</span> config<span class="token punctuation">.</span>webdriver<span class="token punctuation">.</span>port<span class="token punctuation">,</span>
  waitforTimeout<span class="token punctuation">:</span> config<span class="token punctuation">.</span>waitTimeout<span class="token punctuation">,</span>
  desiredCapabilities<span class="token punctuation">:</span> <span class="token punctuation">{</span>browserName<span class="token punctuation">:</span> <span class="token string">'phantomjs'</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">function</span> <span class="token function">WorldConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">var</span> world <span class="token operator">=</span> <span class="token punctuation">{</span>
    browser<span class="token punctuation">:</span> browser<span class="token punctuation">,</span>

    <span class="token comment" spellcheck="true">// Global visit method</span>
    visit<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>baseUrl<span class="token punctuation">,</span> params<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">var</span> pathUrl <span class="token operator">=</span> url<span class="token punctuation">.</span><span class="token function">format</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        pathname<span class="token punctuation">:</span> baseUrl<span class="token punctuation">,</span>
        query<span class="token punctuation">:</span> params
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>browser<span class="token punctuation">.</span><span class="token function">url</span><span class="token punctuation">(</span>pathUrl<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    <span class="token comment" spellcheck="true">// Take screenshot</span>
    screenshot<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>filename<span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> browser<span class="token punctuation">.</span><span class="token function">saveScreenshot</span><span class="token punctuation">(</span>path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>config<span class="token punctuation">.</span>screenshot<span class="token punctuation">.</span>path<span class="token punctuation">,</span> filename<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>

    assert<span class="token punctuation">:</span> <span class="token punctuation">{</span>
      <span class="token comment" spellcheck="true">/**
       * Assert if element(s) are visible
       *
       * @param selector    {String}   Can be query multiple DOM elements
       * @param failMessage {String}   Fail message if no visible
       */</span>
      visible<span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>selector<span class="token punctuation">,</span> failMessage<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment" spellcheck="true">// ...</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">}</span>

    <span class="token comment" spellcheck="true">// ...</span>
  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> world<span class="token punctuation">;</span>
<span class="token punctuation">}</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> WorldConstructor<span class="token punctuation">;</span>
</code></pre><h3 class="sc-ckVGcZ kDNhcm" data-reactid="108"><!-- react-text: 109 -->Hooks<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="110"><!-- react-text: 111 -->Cucumber.js permet de déclencher des traitements sur <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://github.com/cucumber/cucumber-js#hooks" data-reactid="112"><!-- react-text: 113 -->certains évènements clés<!-- /react-text --></a><!-- react-text: 114 --> lors de l’exécution de la suite de tests. Nous utilisons ce système pour réaliser une capture d’écran sur chaque scénario de test en échec qui viendra s&#x27;ajouter dans le dossier <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="115">screenshots</code><!-- react-text: 116 -->.<!-- /react-text --></p><pre class="language-javascript sc-kAzzGY cBZpCn" data-reactid="117"><code class="language-javascript" data-reactid="118"><span class="token comment" spellcheck="true">// tests/support/hook.js</span>
<span class="token keyword">var</span> config <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'./config.json'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">var</span> sprintf <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'sprintf-js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sprintf<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Before</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>scenario<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>browser<span class="token punctuation">.</span><span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>browser<span class="token punctuation">.</span><span class="token function">setViewportSize</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
        width<span class="token punctuation">:</span> config<span class="token punctuation">.</span>screenshot<span class="token punctuation">.</span>width<span class="token punctuation">,</span>
        height<span class="token punctuation">:</span> config<span class="token punctuation">.</span>screenshot<span class="token punctuation">.</span>height
      <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span>scenario<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">if</span> <span class="token punctuation">(</span>scenario<span class="token punctuation">.</span><span class="token function">isFailed</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">screenshot</span><span class="token punctuation">(</span><span class="token function">sprintf</span><span class="token punctuation">(</span>
        <span class="token string">'%s_%d.png'</span><span class="token punctuation">,</span>
        scenario<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toLowerCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span><span class="token string">' '</span><span class="token punctuation">,</span> <span class="token string">'-'</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
        <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
      <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>browser<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
      <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>browser<span class="token punctuation">.</span><span class="token function">end</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre><h3 class="sc-ckVGcZ kDNhcm" data-reactid="119"><!-- react-text: 120 -->Step definitions<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="121"><!-- react-text: 122 -->Ce sont les fichiers qui font le lien entre les features (écrit en langage naturel) et WebdriverIO (initialisé dans <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="123">world.js</code><!-- react-text: 124 -->).<!-- /react-text --></p><pre class="language-javascript sc-kAzzGY cBZpCn" data-reactid="125"><code class="language-javascript" data-reactid="126"><span class="token comment" spellcheck="true">// tests/step_definitions/cookie.steps.js</span>
<span class="token keyword">var</span> sprintf <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'sprintf-js'</span><span class="token punctuation">)</span><span class="token punctuation">.</span>sprintf<span class="token punctuation">;</span>

module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token comment" spellcheck="true">/**
   * Visit a page
   *
   * @param page {String}
   *
   * @require config routes object
   */</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">When</span><span class="token punctuation">(</span><span class="token regex">/^I visit the "([^"]*)" page$/</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>page<span class="token punctuation">)</span> <span class="token punctuation">{</span>    
    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">visit</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getRoute</span><span class="token punctuation">(</span>page<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
      <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>assert<span class="token punctuation">.</span><span class="token function">existing</span><span class="token punctuation">(</span><span class="token string">'#__main'</span><span class="token punctuation">,</span> <span class="token string">'React application is not loaded.'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">/**
   * I click on "label"
   *
   * @param label {String}   DOM selector label
   */</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">When</span><span class="token punctuation">(</span><span class="token regex">/^I click on "([^"]*)"$/</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>label<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> selector <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDOMSelector</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>action<span class="token punctuation">.</span><span class="token function">click</span><span class="token punctuation">(</span>selector<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">/**
   * Assert element matching the given selector is visible.
   *
   * @param label {String}
   *
   * @require config DOMSelectors object
   */</span>
  <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">Then</span><span class="token punctuation">(</span><span class="token regex">/^I should see a "([^"]*)"$/</span><span class="token punctuation">,</span> <span class="token keyword">function</span> <span class="token punctuation">(</span>label<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> selector <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">getDOMSelector</span><span class="token punctuation">(</span>label<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token keyword">var</span> failMessage <span class="token operator">=</span> <span class="token function">sprintf</span><span class="token punctuation">(</span><span class="token string">'%s is not visible'</span><span class="token punctuation">,</span> label<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token keyword">this</span><span class="token punctuation">.</span>assert<span class="token punctuation">.</span><span class="token function">visible</span><span class="token punctuation">(</span>selector<span class="token punctuation">,</span> failMessage<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment" spellcheck="true">// ...</span>
<span class="token punctuation">}</span>
</code></pre><h3 class="sc-ckVGcZ kDNhcm" data-reactid="127"><!-- react-text: 128 -->Design<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="129"><!-- react-text: 130 -->Nous n&#x27;avons pas mis en œuvre le <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://blog.josephwilk.net/cucumber/page-object-pattern.html" data-reactid="131"><!-- react-text: 132 -->pattern Page Object<!-- /react-text --></a><!-- react-text: 133 -->. Ce n&#x27;était pas un choix délibéré mais le contexte et les enjeux du projet nous ont fait passer à côté, ou ce n&#x27;était peut être simplement pas le moment. Malgré tout, nous avons tenté de rationaliser au mieux l&#x27;organisation du code. Par exemple, afin de ne pas se retrouver avec des sélecteurs CSS éparpillés dans plusieurs fichiers de “features” ou de “step definitions”, nous avons choisi de les regrouper dans un fichier <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="134">constants.json</code><!-- react-text: 135 --> et d’utiliser seulement des labels ailleurs. Nous faisons le lien entre le label et le sélecteur CSS avec la méthode <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="136">getDOMSelector</code><!-- react-text: 137 -->, visible ci-dessus et définie dans le fichier <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="138">world.js</code><!-- react-text: 139 -->.<!-- /react-text --></p><h3 class="sc-ckVGcZ kDNhcm" data-reactid="140"><!-- react-text: 141 -->Run<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="142"><!-- react-text: 143 -->Pour lancer les tests, il faut :<!-- /react-text --></p><ul class="sc-cMljjf ggLcPy" data-reactid="144"><li class="sc-jAaTju gAAzOx" data-reactid="145"><!-- react-text: 146 -->lancer le serveur de l’app en local (l’URL du serveur est paramétrable dans le fichier de config),<!-- /react-text --></li><li class="sc-jAaTju gAAzOx" data-reactid="147"><!-- react-text: 148 -->lancer un phantomjs en mode webdriver <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="149">phantomjs --webdriver=5024</code><!-- react-text: 150 --> où 5024 est le port du serveur (également configurable dans <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="151">config.json</code><!-- react-text: 152 -->),<!-- /react-text --></li><li class="sc-jAaTju gAAzOx" data-reactid="153"><!-- react-text: 154 -->lancer une suite de tests via Cucumberjs, au choix :<!-- /react-text --><ul class="sc-cMljjf ggLcPy" data-reactid="155"><li class="sc-jAaTju gAAzOx" data-reactid="156"><!-- react-text: 157 -->tous les tests <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="158">cucumberjs tests/</code><!-- react-text: 159 -->,<!-- /react-text --></li><li class="sc-jAaTju gAAzOx" data-reactid="160"><!-- react-text: 161 -->une feature <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="162">cucumberjs tests/cookie.feature</code><!-- react-text: 163 -->,<!-- /react-text --></li><li class="sc-jAaTju gAAzOx" data-reactid="164"><!-- react-text: 165 -->un scénario <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="166">cucumberjs tests/cookie.feature:3</code><!-- react-text: 167 --> où 3 correspond à la ligne du début du scénario ciblé dans le fichier <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="168">cookie.feature</code><!-- react-text: 169 -->.<!-- /react-text --></li></ul></li></ul><h2 class="sc-kpOJdX cGEAUG" data-reactid="170"><!-- react-text: 171 -->Particularité de l’isomorphisme<!-- /react-text --></h2><p class="sc-jzJRlG dkFleX" data-reactid="172"><!-- react-text: 173 -->Deux chemins sont possibles avec l’isomorphisme. Soit l’utilisateur arrive directement sur la page, auquel cas celle-ci sera générée sur le serveur, soit il y arrive en naviguant sur l’app et c’est le client qui aura exécuté le code. Il faut tester ces deux cas car le code concerné n’est pas toujours le même (la variable <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="174">window</code><!-- react-text: 175 --> par exemple n’est pas accessible côté serveur).<!-- /react-text --></p><p class="sc-jzJRlG dkFleX" data-reactid="176"><!-- react-text: 177 -->Il est bien sûr impossible d’être exhaustif. L’idée est d’abord de couvrir les cas les plus fréquents et les plus critiques pour l’application. Ensuite, il faut s’astreindre à ajouter un test à chaque fois qu’un bug est détecté de façon à s’assurer qu’on ne le rencontrera plus dans le futur.<!-- /react-text --></p><h2 class="sc-kpOJdX cGEAUG" data-reactid="178"><!-- react-text: 179 -->PhantomJS, la stabilité en question...<!-- /react-text --></h2><p class="sc-jzJRlG dkFleX" data-reactid="180"><!-- react-text: 181 -->Basé sur Webkit, PhantomJS est le plus connu des navigateurs headless, c’est-à-dire exécutables sans interface visuelle. D’autres navigateurs légers et créés pour les tests fonctionnels existent comme <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://slimerjs.org/" data-reactid="182"><!-- react-text: 183 -->SlimerJS<!-- /react-text --></a><!-- react-text: 184 --> (basé sur Gecko et pas vraiment headless) ou <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://zombie.js.org/" data-reactid="185"><!-- react-text: 186 -->Zombie.js<!-- /react-text --></a><!-- react-text: 187 --> (pas de moteur de rendu). Cependant aucun n’offre toutes les fonctionnalités de PhantomJS qui se rapprochent le plus d’un vrai browser. <!-- /react-text --><strong class="sc-cvbbAY bTjqEk" data-reactid="188"><!-- react-text: 189 -->Il émule de façon transparente tout le rendu graphique<!-- /react-text --></strong><!-- react-text: 190 --> avec la possibilité de réaliser des screenshots par exemple ou de tester la visibilité d’un élément du DOM (non opaque, dans le viewport, sur la couche z-index la plus haute...).<!-- /react-text --></p><p class="sc-jzJRlG dkFleX" data-reactid="191"><!-- react-text: 192 -->Néanmoins celui-ci n&#x27;intègre pas toutes les dernières avancées en terme de JS et de CSS. Flexbox n’est par exemple pas pris en charge ce qui nous a posé quelques problèmes sur les vérifications liées à la visibilité des éléments. Sa version 2.0 qui date de début 2015, malgré la bonne volonté des contributeurs, n’a toujours pas de build officiel sous Linux, ce qui oblige à compiler les sources sur sa machine de tests ou à trouver sur le net un build officieux correspondant à sa distribution. C’est ce que nous avons fait via <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://github.com/M6Web/phantomjs2" data-reactid="193"><!-- react-text: 194 -->M6Web/phantomjs2<!-- /react-text --></a><!-- react-text: 195 -->. Cependant, l’outil est assez instable (builds officiels ou pas) et nous avons rencontré beaucoup de crashs aléatoires ou reproductibles mais incompréhensibles (dus par exemple à l’ajout de quelques lignes de CSS anodines...).<!-- /react-text --></p><p class="sc-jzJRlG dkFleX" data-reactid="196"><!-- react-text: 197 -->En local, sur sa machine, PhantomJS est encore moins stable que sur Jenkins. Il semblerait qu’exécution après exécution, il garde des “choses” en cache quelque part qui, à terme, produisent des crashs systématiques de l’outil. Nous n&#x27;avons pas réussi à établir un scénario reproductible qui nous permette de poser une issue sur le projet. N&#x27;hésitez pas à réagir en commentaire si vous vous êtes trouvé dans un cas similaire.<!-- /react-text --></p><p class="sc-jzJRlG dkFleX" data-reactid="198"><!-- react-text: 199 -->Pour régler temporairement ce problème, nous avons utilisé l’<!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://github.com/rosenhouse/phantomjs2" data-reactid="200"><!-- react-text: 201 -->image docker de Gabe Rosenhouse<!-- /react-text --></a><!-- react-text: 202 --> pour le faire tourner dans un environnement indépendant mais ce n’est pas faciliter la vie des développeurs qui veulent juste lancer des tests sans avoir à mettre en œuvre une usine à gaz derrière.<!-- /react-text --></p><p class="sc-jzJRlG dkFleX" data-reactid="203"><em class="sc-eHgmQL bmILUK" data-reactid="204"><!-- react-text: 205 -->Edit: hier, la version 2.1 de PhantomJS a (enfin) été publiée avec <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://phantomjs.org/download.html" data-reactid="206"><!-- react-text: 207 -->un build pour chaque plateforme<!-- /react-text --></a><!-- react-text: 208 -->. Plusieurs de nos soucis pourraient être réglés avec cette nouvelle release, à suivre...<!-- /react-text --></em></p><h2 class="sc-kpOJdX cGEAUG" data-reactid="209"><!-- react-text: 210 -->Chrome+ChromeDriver, une alternative ?<!-- /react-text --></h2><p class="sc-jzJRlG dkFleX" data-reactid="211"><!-- react-text: 212 -->Nous avons alors opté pour la solution Chrome+ChromeDriver. <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://code.google.com/p/selenium/wiki/ChromeDriver" data-reactid="213"><!-- react-text: 214 -->ChromeDriver<!-- /react-text --></a><!-- react-text: 215 --> a le rôle du serveur Selenium qui permet de faire communiquer WebriverIO avec Chrome. Les avantages de cette stack sont multiples. D’abord, l’ensemble est beaucoup <!-- /react-text --><strong class="sc-cvbbAY bTjqEk" data-reactid="216"><!-- react-text: 217 -->plus stable<!-- /react-text --></strong><!-- react-text: 218 -->, fini les crashs impromptus. Ensuite, le <!-- /react-text --><strong class="sc-cvbbAY bTjqEk" data-reactid="219"><!-- react-text: 220 -->debug des tests<!-- /react-text --></strong><!-- react-text: 221 --> en échec est bien plus aisé : on voit en effet la suite se jouer en temps réel dans son navigateur, on peut ainsi tout à fait mettre un point d’arrêt et utiliser la console de développement. Enfin, on utilise la version de Chrome que l’on souhaite, donc <!-- /react-text --><strong class="sc-cvbbAY bTjqEk" data-reactid="222"><!-- react-text: 223 -->plus de problème de CSS non supportés<!-- /react-text --></strong><!-- react-text: 224 -->.<!-- /react-text --></p><p class="sc-jzJRlG dkFleX" data-reactid="225"><!-- react-text: 226 -->Alors pourquoi se cantonner à n’utiliser Chrome+ChromeDriver qu’en local et pas en intégration continue sur Jenkins ? Chrome n’est pas un browser headless et a besoin d’une interface visuelle qui n’est pas disponible sur Jenkins. Il existe des solutions pour simuler un affichage graphique avec <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://www.x.org/archive/X11R7.6/doc/man/man1/Xvfb.1.xhtml" data-reactid="227"><!-- react-text: 228 -->Xvfb<!-- /react-text --></a><!-- react-text: 229 --> par exemple. Nous avons tenté de mettre en place une telle stack sur l’image docker utilisée pour créer notre environnement de test sur Jenkins en se basant sur l’<!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://github.com/RobCherry/docker-chromedriver" data-reactid="230"><!-- react-text: 231 -->image de Rob Cherry<!-- /react-text --></a><!-- react-text: 232 -->. Malheureusement, après y avoir consacré un peu d’énergie, le résultat n’a pas été au rendez-vous car :<!-- /react-text --></p><ul class="sc-cMljjf ggLcPy" data-reactid="233"><li class="sc-jAaTju gAAzOx" data-reactid="234"><!-- react-text: 235 -->l&#x27;exécution des tests dans Chrome est bien plus lente que sur PhantomJS (2 à 3 fois plus lent), notre intégration continue prenant déjà plus de 10 minutes sur ce projet,<!-- /react-text --></li><li class="sc-jAaTju gAAzOx" data-reactid="236"><!-- react-text: 237 -->il semble difficile d’obtenir ici aussi une stabilité du dispositif, les sessions Webdriver étaient souvent perdues, sans que nous en trouvions la cause.<!-- /react-text --></li></ul><p class="sc-jzJRlG dkFleX" data-reactid="238"><!-- react-text: 239 -->Ces raisons nous ont conduit à abandonner cette piste.<!-- /react-text --></p><h2 class="sc-kpOJdX cGEAUG" data-reactid="240"><!-- react-text: 241 -->Quelques tips pour améliorer la stabilité de ses tests<!-- /react-text --></h2><p class="sc-jzJRlG dkFleX" data-reactid="242"><!-- react-text: 243 -->Nous avons continué d’espérer avoir une stack stable pour nos tests fonctionnels. Avec persévérance, nous pouvons dire qu’à l’heure actuelle grâce à ces quelques tips, nous avons une plateforme de test stable (à 99%) !<!-- /react-text --></p><h3 class="sc-ckVGcZ kDNhcm" data-reactid="244"><!-- react-text: 245 -->waitUntil<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="246"><!-- react-text: 247 -->C’est la première chose à faire et la plus importante de notre point de vue. On ne sait jamais vraiment quand un élément s’affichera dans la page car son chargement dépend de trop de facteurs non prédictibles (la connexion, l’utilisation cpu, gpu, mémoire, etc.). Sur notre projet, nous avons par exemple beaucoup d’animations CSS qui retardent le timing d’apparition des pages et des éléments du DOM. Notre première approche a été de rajouter des <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="248">sleep</code><!-- react-text: 249 --> un peu de partout dans nos tests. Chose à ne pas faire. L’usage des <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="250">sleep</code><!-- react-text: 251 --> doit être cantonné à des cas très spécifiques. Pour tout le reste, il faut user et abuser du <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://webdriver.io/api/utility/waitUntil.html" data-reactid="252"><code class="sc-jWBwVP gbenQb" data-reactid="253">waitUntil</code></a><!-- react-text: 254 --> de WebdriverIO, que ce soit pour des actions ou des vérifications dans la page, et en adaptant le timeout à votre projet (certaines de nos animations sont assez longues).<!-- /react-text --></p><h3 class="sc-ckVGcZ kDNhcm" data-reactid="255"><!-- react-text: 256 -->rollover<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="257"><!-- react-text: 258 -->Un autre problème que nous avons rencontré est la bonne exécution des rollovers. En utilisant la méthode <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://webdriver.io/api/action/moveToObject.html" data-reactid="259"><code class="sc-jWBwVP gbenQb" data-reactid="260">moveToObject</code></a><!-- react-text: 261 --> pour pointer la souris sur un élément, il nous arrivait que le comportement “hover” ne soit pas déclenché, mettant en échec la suite du test. Nous avons donc changé notre manière d’effectuer le rollover : on répète l’action grâce au <!-- /react-text --><code class="sc-jWBwVP gbenQb" data-reactid="262">waitUntil</code><!-- react-text: 263 --> tant que l’élement devant apparaître au hover n’est pas visible.<!-- /react-text --></p><p class="sc-jzJRlG dkFleX" data-reactid="264"><!-- react-text: 265 -->Nous n’écrivons plus<!-- /react-text --></p><pre class="language-bash sc-kAzzGY cBZpCn" data-reactid="266"><code class="language-bash" data-reactid="267">I rollover the <span class="token string">"Header login icon"</span>
</code></pre><p class="sc-jzJRlG dkFleX" data-reactid="268"><!-- react-text: 269 -->mais<!-- /react-text --></p><pre class="language-bash sc-kAzzGY cBZpCn" data-reactid="270"><code class="language-bash" data-reactid="271">I rollover the <span class="token string">"Header login icon"</span> to <span class="token function">make</span> <span class="token string">"Submenu"</span> appear
</code></pre><h3 class="sc-ckVGcZ kDNhcm" data-reactid="272"><!-- react-text: 273 -->rerun<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="274"><a class="sc-hSdWYo kndpkt" href="https://github.com/cucumber/cucumber-js#formatters" data-reactid="275"><!-- react-text: 276 -->“Rerun”<!-- /react-text --></a><!-- react-text: 277 --> est une fonctionnalité existante sur d’autres frameworks de tests fonctionnels tel que Behat et créée pour les tests récalcitrants encore instables. Elle permet de stocker dans un fichier texte la liste des scénarios en échec pour les relancer ensuite afin de vérifier qu’ils le sont réellement. Nous avons mis en place ce process sur Jenkins, bien qu’il y ait <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="https://github.com/cucumber/cucumber-js/issues/499" data-reactid="278"><!-- react-text: 279 -->quelques subtilités qui ne facilitent pas la tâche<!-- /react-text --></a><!-- react-text: 280 --> (mais qui devraient être bientôt corrigées), et nous en sommes satisfaits.<!-- /react-text --></p><h3 class="sc-ckVGcZ kDNhcm" data-reactid="281"><!-- react-text: 282 -->isVisible<!-- /react-text --></h3><p class="sc-jzJRlG dkFleX" data-reactid="283"><!-- react-text: 284 -->A nos débuts, nous avons eu quelques problèmes avec la fonction <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://webdriver.io/api/state/isVisible.html" data-reactid="285"><code class="sc-jWBwVP gbenQb" data-reactid="286">isVisible</code></a><!-- react-text: 287 --> de WebdriverIO car les éléments opaques ou en dehors du viewport étaient considérés comme visibles. Nous avons alors choisi d’utiliser <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://stackoverflow.com/questions/123999/how-to-tell-if-a-dom-element-is-visible-in-the-current-viewport/7557433#7557433" data-reactid="288"><!-- react-text: 289 -->une fonction custom<!-- /react-text --></a><!-- react-text: 290 --> injectée via <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://webdriver.io/api/protocol/execute.html" data-reactid="291"><code class="sc-jWBwVP gbenQb" data-reactid="292">execute</code></a><!-- react-text: 293 -->. Récemment, dans la version 3 de WebdriverIO, la fonction <!-- /react-text --><a class="sc-hSdWYo kndpkt" href="http://webdriver.io/api/state/isVisibleWithinViewport.html" data-reactid="294"><!-- react-text: 295 -->isVisibleWithinViewport<!-- /react-text --></a><!-- react-text: 296 --> a fait son apparition mais nous n&#x27;avons pas encore tenté de l&#x27;utiliser dans nos tests.<!-- /react-text --></p><p class="sc-jzJRlG dkFleX" data-reactid="297"><!-- react-text: 298 -->Cet article est un retour d’expérience sur notre usage des tests fonctionnels sur un projet précis mais il est loin d’exposer des vérités absolues. Si vous avez des remarques ou n’êtes pas d’accord avec certaines choses, n’hésitez pas à nous le faire savoir !<!-- /react-text --></p></div></div></div><div class="sc-gZMcBi dAKnmY" data-reactid="299"><div class="sc-kgAjT uVVjM" data-reactid="300"><!-- react-text: 301 -->© M6 WEB <!-- /react-text --><!-- react-text: 302 -->2017<!-- /react-text --><!-- react-text: 303 --> — <!-- /react-text --><!-- react-text: 304 --> Built with<!-- /react-text --><!-- react-text: 305 --> <!-- /react-text --><a class="sc-bdVaJa fKsidO" href="https://www.gatsbyjs.org/" data-reactid="306">Gatsby</a></div></div></div></div></body></html>