webpackJsonp([0x8c5cf76506bc2000],{"./node_modules/json-loader/index.js!./.cache/json/surcharger-un-provider-angular.json":function(e,n){e.exports={data:{markdownRemark:{ast:'{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Nous avons eu besoin de surcharger un ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":39,"offset":39},"indent":[]}},{"type":"link","title":null,"url":"https://docs.angularjs.org/guide/providers","children":[{"type":"text","value":"provider AngularJS","position":{"start":{"line":2,"column":40,"offset":40},"end":{"line":2,"column":58,"offset":58},"indent":[]}}],"position":{"start":{"line":2,"column":39,"offset":39},"end":{"line":2,"column":103,"offset":103},"indent":[]}},{"type":"text","value":" – ","position":{"start":{"line":2,"column":103,"offset":103},"end":{"line":2,"column":106,"offset":106},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/revolunet/angular-google-analytics","children":[{"type":"text","value":"AnalyticsProvider","position":{"start":{"line":2,"column":107,"offset":107},"end":{"line":2,"column":124,"offset":124},"indent":[]}}],"position":{"start":{"line":2,"column":106,"offset":106},"end":{"line":2,"column":180,"offset":180},"indent":[]}},{"type":"text","value":" – pour le rendre configurable dynamiquement en fonction d\'un paramètre de la route. Le service ","position":{"start":{"line":2,"column":180,"offset":180},"end":{"line":2,"column":276,"offset":276},"indent":[]}},{"type":"inlineCode","value":"$route","position":{"start":{"line":2,"column":276,"offset":276},"end":{"line":2,"column":284,"offset":284},"indent":[]}},{"type":"text","value":" n\'étant pas disponible dans la phase de configuration d\'AngularJS, il a fallu ruser...","position":{"start":{"line":2,"column":284,"offset":284},"end":{"line":2,"column":371,"offset":371},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":371,"offset":371},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Le but est donc de changer la méthode ","position":{"start":{"line":4,"column":1,"offset":373},"end":{"line":4,"column":39,"offset":411},"indent":[]}},{"type":"inlineCode","value":"$get","position":{"start":{"line":4,"column":39,"offset":411},"end":{"line":4,"column":45,"offset":417},"indent":[]}},{"type":"text","value":" de ce provider afin de lui ajouter notre dépendance et ainsi finir notre configuration.","position":{"start":{"line":4,"column":45,"offset":417},"end":{"line":4,"column":133,"offset":505},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":373},"end":{"line":4,"column":133,"offset":505},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Il existe bien une méthode ","position":{"start":{"line":6,"column":1,"offset":507},"end":{"line":6,"column":28,"offset":534},"indent":[]}},{"type":"link","title":null,"url":"https://docs.angularjs.org/api/auto/service/$provide#decorator","children":[{"type":"inlineCode","value":"decorator()","position":{"start":{"line":6,"column":29,"offset":535},"end":{"line":6,"column":42,"offset":548},"indent":[]}}],"position":{"start":{"line":6,"column":28,"offset":534},"end":{"line":6,"column":107,"offset":613},"indent":[]}},{"type":"text","value":" dans le service d\'injection de dependance d\'AngularJS, mais celle-ci ne permet que de décorer des services et pas leurs providers.","position":{"start":{"line":6,"column":107,"offset":613},"end":{"line":6,"column":238,"offset":744},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":507},"end":{"line":6,"column":238,"offset":744},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Nous allons donc mettre les mains dans l\'","position":{"start":{"line":8,"column":1,"offset":746},"end":{"line":8,"column":42,"offset":787},"indent":[]}},{"type":"inlineCode","value":"$injector","position":{"start":{"line":8,"column":42,"offset":787},"end":{"line":8,"column":53,"offset":798},"indent":[]}},{"type":"text","value":" pour récupérer et modifier à la volée le provider :","position":{"start":{"line":8,"column":53,"offset":798},"end":{"line":8,"column":105,"offset":850},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":746},"end":{"line":8,"column":105,"offset":850},"indent":[]}},{"type":"code","lang":"js","value":"angular.module(\'myModule\')\\n  .config(function ($injector) {\\n    var AnalyticsProvider = $injector.get(\'AnalyticsProvider\');\\n    var $get              = AnalyticsProvider.$get;\\n    // ...\\n  });","position":{"start":{"line":10,"column":1,"offset":852},"end":{"line":17,"column":4,"offset":1054},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Maintenant que nous avons le ","position":{"start":{"line":19,"column":1,"offset":1056},"end":{"line":19,"column":30,"offset":1085},"indent":[]}},{"type":"inlineCode","value":"$get","position":{"start":{"line":19,"column":30,"offset":1085},"end":{"line":19,"column":36,"offset":1091},"indent":[]}},{"type":"text","value":", il faut le modifier pour ajouter notre dépendance. Et c\'est assez simple vu qu\'il utilise l\'annotation sous forme de tableau :","position":{"start":{"line":19,"column":36,"offset":1091},"end":{"line":19,"column":164,"offset":1219},"indent":[]}}],"position":{"start":{"line":19,"column":1,"offset":1056},"end":{"line":19,"column":164,"offset":1219},"indent":[]}},{"type":"code","lang":"js","value":"// https://github.com/revolunet/angular-google-analytics/blob/e821407fe0436677cb42eafd5b338d767990b723/src/angular-google-analytics.js#L99\\nthis.$get = [\'$document\', \'$rootScope\', \'$location\', \'$window\', function($document, $rootScope, $location, $window) {","position":{"start":{"line":21,"column":1,"offset":1221},"end":{"line":24,"column":4,"offset":1487},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Nous devons modifier ce tableau en ajoutant nos dépendances et en remplaçant la fonction :","position":{"start":{"line":26,"column":1,"offset":1489},"end":{"line":26,"column":91,"offset":1579},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1489},"end":{"line":26,"column":91,"offset":1579},"indent":[]}},{"type":"code","lang":"js","value":"// la fonction d\'origine est le dernier élément du tableau\\nvar origFn = $get[$get.length - 1];\\n// on la remplace par notre dépendance\\n$get[$get.length - 1] = \'$route\';\\n// on ajoute notre nouvelle fonction à la fin du tableau\\n$get[$get.length] = function () {\\n    // $route est le dernier argument\\n    var $route = arguments[arguments.length - 1];\\n    // on fait notre traitement\\n    AnalyticsProvider.setAccount($route.current.params.partner ? \'partner-account\' : \'own-account\');\\n    // et qui rappelle la fonction originale\\n    return origFn.apply(AnalyticsProvider, arguments);\\n};","position":{"start":{"line":28,"column":1,"offset":1581},"end":{"line":42,"column":4,"offset":2173},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"On peut noter l\'utilisation de l\'objet ","position":{"start":{"line":44,"column":1,"offset":2175},"end":{"line":44,"column":40,"offset":2214},"indent":[]}},{"type":"link","title":null,"url":"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/arguments","children":[{"type":"inlineCode","value":"arguments","position":{"start":{"line":44,"column":41,"offset":2215},"end":{"line":44,"column":52,"offset":2226},"indent":[]}}],"position":{"start":{"line":44,"column":40,"offset":2214},"end":{"line":44,"column":140,"offset":2314},"indent":[]}},{"type":"text","value":" qui permet de rester générique et de garder la compatibilité en cas de changement des dépendances du module surchargé.","position":{"start":{"line":44,"column":140,"offset":2314},"end":{"line":44,"column":259,"offset":2433},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":2175},"end":{"line":44,"column":259,"offset":2433},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Grâce à cette astuce, notre service ","position":{"start":{"line":46,"column":1,"offset":2435},"end":{"line":46,"column":37,"offset":2471},"indent":[]}},{"type":"inlineCode","value":"Analytics","position":{"start":{"line":46,"column":37,"offset":2471},"end":{"line":46,"column":48,"offset":2482},"indent":[]}},{"type":"text","value":" est maintenant configuré dynamiquement selon nos souhaits avant son utilisation.","position":{"start":{"line":46,"column":48,"offset":2482},"end":{"line":46,"column":129,"offset":2563},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":2435},"end":{"line":46,"column":129,"offset":2563},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":47,"column":1,"offset":2564}}}',frontmatter:{date:"October 08, 2014",path:"/surcharger-un-provider-angular",title:"Providers AngularJS et configuration dynamique",image:{childImageSharp:{resize:{src:"/static/6f2740d24ad4f422c033d3247929e12e-338bd.jpg"}}}}}},pathContext:{}}}});
//# sourceMappingURL=path---surcharger-un-provider-angular-333bd1995a54eaffd923.js.map